### IntraScribe

é¢å‘ä¼ä¸šã€å­¦æ ¡ä¸æœºå…³ç­‰å†…ç½‘ç¯å¢ƒçš„æœ¬åœ°ä¼˜å…ˆè¯­éŸ³è½¬å†™ä¸åä½œå¹³å°ï¼šæ”¯æŒå®æ—¶è½¬å†™ã€è¯´è¯äººåˆ†ç¦»ã€é«˜è´¨é‡æ‰¹å¤„ç†ã€AI æ€»ç»“ä¸æ ‡é¢˜ç”Ÿæˆã€‚é»˜è®¤æä¾›æµè§ˆå™¨ WebRTC æ¥å…¥ä¸ SSE å®æ—¶è¿”å›ï¼Œä¹Ÿæ”¯æŒè¾¹ç¼˜è®¾å¤‡/ç¡¬ä»¶ä½œä¸ºå‰ç«¯ï¼Œæ¶æ„è§£è€¦ã€å¯æ›¿æ¢ä»»æ„é‡‡é›†ä¸ä¼ è¾“æ–¹æ¡ˆï¼›æ•°æ®å…¨ç¨‹ç•™åœ¨æœ¬åœ°ï¼Œé‡è§†éšç§ä¸åˆè§„ã€‚

ç‚¹å‡»å›¾ç‰‡è§‚çœ‹bilibiliæ¼”ç¤ºè§†é¢‘

[![Watch the video](doc/cover.png)](https://www.bilibili.com/video/BV14AbhzXEKc/)



---

### åŠŸèƒ½ç‰¹æ€§

- æœ¬åœ°ä¼˜å…ˆä¸éšç§ä¿æŠ¤ï¼šå¯åœ¨å†…ç½‘/ç¦»çº¿ç¯å¢ƒç‹¬ç«‹éƒ¨ç½²ï¼Œæ•°æ®ä¸å¤–å‘ï¼Œæ»¡è¶³éšç§ä¸åˆè§„è¦æ±‚ã€‚
- å›¢é˜Ÿä¸ç»„ç»‡åä½œï¼šè´¦å·ä½“ç³»ã€æ¨¡æ¿å…±äº«ä¸ç¼–è¾‘æµç¨‹ï¼Œé€‚é…ä¼ä¸š/å­¦æ ¡å¤šç”¨æˆ·åä½œã€‚
- ç¡¬ä»¶å‹å¥½ä¸å¯æ’æ‹”å‰ç«¯ï¼šæ”¯æŒæµè§ˆå™¨æˆ–è¾¹ç¼˜è®¾å¤‡/ç¡¬ä»¶ä½œä¸ºé‡‡é›†ç«¯ï¼Œä¼ è¾“æ–¹æ¡ˆå¯æ›¿æ¢ã€‚
- å®æ—¶è½¬å†™ï¼ˆæœ¬åœ° ASRï¼‰ï¼šæµè§ˆå™¨æˆ–ç¡¬ä»¶ç«¯å½•éŸ³ï¼Œä½å»¶è¿Ÿæ¨æµåˆ°åç«¯ï¼ŒSSE å®æ—¶è¿”å›è½¬å†™ç‰‡æ®µï¼›æ”¯æŒæ–­å­—æ¸…ç†ä¸æ—¶é—´æˆ³æ ¼å¼åŒ–ã€‚
- æ‰¹å¤„ç†é«˜è´¨é‡è½¬å†™ï¼šä¼šè¯ç»“æŸåæ•´åˆç¼“å­˜éŸ³é¢‘ï¼Œè‡ªåŠ¨ä¸Šä¼ è‡³ Supabase Storageï¼Œè°ƒç”¨é€šç”¨éŸ³é¢‘å¤„ç†æœåŠ¡è¿›è¡Œè¯´è¯äººåˆ†ç¦»ä¸é‡è½¬å†™ï¼Œæå‡è´¨é‡ä¸ç»“æ„åŒ–ç¨‹åº¦ã€‚
- è¯´è¯äººåˆ†ç¦»ä¸é‡å‘½åï¼šåŸºäº pyannote.audio çš„è¯´è¯äººåˆ†ç¦»ï¼Œå®Œæˆååœ¨å‰ç«¯å¯åŒå‡»æ ‡ç­¾é‡å‘½åï¼Œå¹¶åŒæ­¥æ›´æ–°æ•°æ®åº“ä¸­çš„è½¬å†™ segmentsã€‚
- AI æ€»ç»“ä¸æ ‡é¢˜ç”Ÿæˆï¼šé›†æˆ LiteLLMï¼Œæ”¯æŒæŒ‰æ¨¡æ¿ç”Ÿæˆç»“æ„åŒ– Markdown æ€»ç»“ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆç®€æ´æ ‡é¢˜ï¼›æ”¯æŒå›é€€ç­–ç•¥ã€‚
- æ¨¡æ¿ç®¡ç†ï¼šæ”¯æŒç”¨æˆ·æ¨¡æ¿ä¸ç³»ç»Ÿæ¨¡æ¿ï¼Œè®¾ä¸ºé»˜è®¤ã€å¤åˆ¶ç³»ç»Ÿæ¨¡æ¿åˆ°ç”¨æˆ·ä¾§ã€ç»Ÿè®¡ä½¿ç”¨æ¬¡æ•°ç­‰ã€‚
- å½•éŸ³ä¼šè¯ç®¡ç†ï¼šåˆ›å»ºã€å®Œæˆã€åˆ é™¤ã€é‡æ–°è½¬å†™ã€æŸ¥çœ‹éŸ³é¢‘æ–‡ä»¶/è½¬å†™/æ€»ç»“ç­‰ï¼›æä¾›å½“å‰æ´»è·ƒä¼šè¯çŠ¶æ€ä¸å†…å­˜ç¼“å­˜çŠ¶æ€æŸ¥è¯¢ã€‚
- æ•°æ®å­˜å‚¨ä¸å®æ—¶è®¢é˜…ï¼šåŸºäº Supabaseï¼ˆPostgres + Auth + Storage + Realtimeï¼‰ï¼›å‰ç«¯é€šè¿‡é¢‘é“è®¢é˜…æ„ŸçŸ¥ä¼šè¯/è½¬å†™çš„å˜åŒ–å¹¶åˆ·æ–°ç•Œé¢ã€‚
- å¯ç¼–è¾‘çš„è½¬å†™ï¼šåœ¨å‰ç«¯å¯¹è½¬å†™è¿›è¡Œå±€éƒ¨ç¼–è¾‘å¹¶ä¿å­˜å›åç«¯ï¼Œä¿ç•™/åˆæˆæ—¶é—´æˆ³ä¸è¯´è¯äººä¿¡æ¯ã€‚
- æ³¨å†Œç™»å½•ç­‰çš„ç®¡ç†ç•Œé¢ã€‚

---

### é€‚ç”¨åœºæ™¯

- ä¼ä¸š/äº‹ä¸šå•ä½å†…ç½‘éƒ¨ç½²çš„ä¼šè®®è®°å½•ä¸çŸ¥è¯†æ²‰æ·€
- å­¦æ ¡/ç ”ç©¶æœºæ„çš„è¯¾å ‚ä¸ç ”è®¨è®°å½•ï¼ˆæ”¯æŒå¤šäººä¸è¯´è¯äººæ ‡æ³¨ï¼‰
- ä¼šè®®å®¤/æŒ‡æŒ¥ä¸­å¿ƒ/ç”Ÿäº§ç°åœºç­‰å¯¹éšç§ä¸å»¶è¿Ÿæ•æ„Ÿçš„åœºæ™¯
- æ¶‰åŠæ•æ„Ÿæ•°æ®çš„æ³•åŠ¡ã€åŒ»ç–—ã€ç ”å‘ç­‰ä¸å…è®¸æ•°æ®å¤–å‘çš„å›¢é˜Ÿ

---

### æŠ€æœ¯æ ˆ

- å‰ç«¯ï¼šNext.js (App Router) + React + TypeScript + Tailwind CSS
- åç«¯ï¼šFastAPIï¼ˆPythonï¼Œä½¿ç”¨ uv ç®¡ç†ä¾èµ–ä¸è¿è¡Œï¼‰
- å®æ—¶ï¼šé»˜è®¤ WebRTCï¼ˆæµè§ˆå™¨æ¨æµï¼‰+ SSEï¼ˆæœåŠ¡ç«¯äº‹ä»¶æµè¿”å›è½¬å†™è¾“å‡ºï¼‰ï¼›æ¶æ„è§£è€¦ï¼Œå¯æ›¿æ¢å…¶ä»–é‡‡é›†/ä¼ è¾“æ–¹æ¡ˆ
- ASRï¼šFunASRï¼ˆæœ¬åœ°æ¨¡å‹ï¼Œå¯ GPU åŠ é€Ÿï¼‰ï¼Œé€‚é…å™¨ `LocalFunASR`
- è¯´è¯äººåˆ†ç¦»ï¼špyannote.audioï¼ˆéœ€ HuggingFace tokenç™»å½•ä¸‹è½½ï¼Œå¯ GPU åŠ é€Ÿï¼‰
- AI æ€»ç»“/æ ‡é¢˜ï¼šLiteLLMï¼ˆå¯é…ç½®å¤šæ¨¡å‹ä¸å›é€€ç­–ç•¥ï¼‰
- å­˜å‚¨ä¸æ•°æ®ï¼šSupabaseï¼ˆAuthã€Postgresã€Storageã€Realtimeï¼‰
- å¤šåª’ä½“å·¥å…·ï¼šFFmpegï¼ˆéŸ³é¢‘è½¬ç ã€åˆ†å‰²ã€ä¿¡æ¯è¯»å–ï¼‰

---

### ç›®å½•ç»“æ„

```text
intrascribe/
  backend/
    app/
      api.py                       # API è·¯ç”±ä¸ç«¯ç‚¹å®šä¹‰ï¼ˆ/api/v1/...ï¼‰
      services.py                  # ä¼šè¯ã€è½¬å†™ã€AIã€ç¼“å­˜ç­‰ä¸šåŠ¡æœåŠ¡
      stt_adapter.py               # FunASR æœ¬åœ°æ¨¡å‹é€‚é…
      speaker_diarization.py       # è¯´è¯äººåˆ†ç¦»æœåŠ¡ï¼ˆpyannoteï¼‰
      batch_transcription.py       # æ‰¹é‡è½¬å†™ä»»åŠ¡å°è£…
      audio_processing_service.py  # é€šç”¨éŸ³é¢‘å¤„ç†ï¼ˆè½¬ç ã€åˆ†æ®µç­‰ï¼‰
      audio_converter.py           # FFmpeg å°è£…
      schemas.py, models.py        # DTO ä¸é¢†åŸŸæ¨¡å‹
      clients.py, repositories.py  # å¤–éƒ¨æœåŠ¡ä¸æ•°æ®è®¿é—®
    main_v1.py                     # å®æ—¶éŸ³é¢‘æµå…¥å£ï¼ˆé»˜è®¤ WebRTC æ¥å…¥å®ç°ï¼‰
    config.yaml                    # AI æ€»ç»“ä¸ STT ç›¸å…³é…ç½®
    pyproject.toml                 # åç«¯ä¾èµ–
  web/
    app/                           # è·¯ç”±ä¸ API ä»£ç†ï¼ˆ/app/api/...ï¼‰
    components/, hooks/, lib/      # UIã€ä¸šåŠ¡ç»„ä»¶ä¸ Supabase å®¢æˆ·ç«¯
  supabase/
    database_schema.sql            # æ•°æ®åº“ç»“æ„ï¼ˆè¡¨ã€RLSã€è§†å›¾ã€å‡½æ•°ï¼‰
    migrations/20250814090000_all_in_one.sql  # å•æ–‡ä»¶è¿ç§»
  README.md
```

---

### å¿«é€Ÿå¼€å§‹

#### 1) å‰ç½®æ¡ä»¶
ä»¥ä¸‹ä¸ºubuntuä¸‹çš„ç¤ºèŒƒï¼š

- nvidia GPU ç”µè„‘ï¼Œcudaå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚ï¼ˆç†è®ºä¸Šä¹Ÿæ”¯æŒçº¯CPUï¼Œä½†æˆ‘æ²¡æœ‰æµ‹è¯•è¿‡ï¼‰
- Node.js 18+
- Python 3.10+ ä¸ uvï¼ˆpython åŒ…ç®¡ç†/è¿è¡Œå™¨ï¼‰ï¼Œå‚è€ƒï¼šhttps://docs.astral.sh/uv/getting-started/installation/#installation-methods 
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

- ollama qwen3:8bã€‚ï¼ˆå¯é€‰å…¶ä»–æ¨¡å‹ï¼Œéœ€è¦ä¿®æ”¹ backend/config.yamlæ–‡ä»¶ä¸­çš„æ¨¡å‹é…ç½®ï¼‰
- FFmpeg
```bash
sudo apt install ffmpeg
```
- supabaseã€‚å‚è€ƒé“¾æ¥ï¼š https://supabase.com/docs/guides/local-development ï¼Œè¿›è¡Œå®‰è£…ã€‚

```bash
npm install supabase --save-dev
```

å®‰è£…è¿‡ç¨‹ä¸­ï¼Œnpm éœ€è¦ä»github ä¸‹è½½äºŒè¿›åˆ¶åŒ…ï¼Œå¦‚æœä¸€ç›´å¡ç€ä¸åŠ¨ï¼Œå¯æ‰‹åŠ¨ä¸‹è½½å’Œå®‰è£…ï¼š
https://github.com/supabase/cli/releases


#### 2) cloneé¡¹ç›®åˆ°æœ¬åœ°
```
git clone https://github.com/weynechen/intrascribe.git
```

#### 3) å¯åŠ¨æ•°æ®åº“

```bash
cd supabase
# å¯åŠ¨å¥—ä»¶
supabase start
```

supbase ä¼šä¸‹è½½ä¸€ç³»åˆ—çš„docker imageï¼Œè€—æ—¶è¾ƒä¹…ï¼Œè€å¿ƒç­‰å¾…ã€‚

å¯åŠ¨æˆåŠŸåï¼Œä¼šå‡ºç°ä¿¡æ¯ï¼š
```txt
         API URL: http://127.0.0.1:54321
     GraphQL URL: http://127.0.0.1:54321/graphql/v1
  S3 Storage URL: http://127.0.0.1:54321/storage/v1/s3
          DB URL: postgresql://postgres:postgres@127.0.0.1:54322/postgres
      Studio URL: http://127.0.0.1:54323
    Inbucket URL: http://127.0.0.1:54324
      JWT secret: super-secret-jwt-token-with-at-least-32-characters-long
        anon key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
service_role key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU
   S3 Access Key: 625729a08b95bf1b7ff351a663f3a23c
   S3 Secret Key: 850181e4652dd023b7a98c58ae0d2d34bd487ee0cc3254aed6eda37307425907
       S3 Region: local
```
å¦‚æœè¿‡ç¨‹ä¸­å‡ºç°502é”™è¯¯ï¼ˆç½‘ç»œé—®é¢˜ï¼‰ï¼Œå¯ä»¥æ’é™¤edge-runtime ï¼š
```bash
sudo supabase start -x edge-runtime
```
å¯åŠ¨æˆåŠŸåï¼Œæ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–
```bash
# åˆå§‹åŒ–æ•°æ®åº“
supabase db reset
```
è®¿é—® http://127.0.0.1:54323/project/default æŸ¥çœ‹æ•°æ®æ˜¯å¦å­˜åœ¨ã€‚

æ³¨ï¼šresetæ“ä½œåªéœ€æ“ä½œä¸€æ¬¡å³å¯ï¼Œå¦åˆ™æ•°æ®åº“ä¼šè¢«æ¸…ç†æ‰ã€‚å¦‚æœéœ€è¦é‡å¯supabaseï¼Œè¿è¡Œ

```bash
cd supabase
supabase stop
supabase start
```

#### 2) é…ç½®ç¯å¢ƒå˜é‡ï¼ˆè¯·è‡ªè¡Œåˆ›å»º/ä¿®æ”¹æ–‡ä»¶ï¼‰
- å‰ç«¯ `web/.env.local`ï¼ˆç¤ºä¾‹å†…å®¹ï¼‰ï¼š
```bash
NEXT_PUBLIC_SUPABASE_ANON_KEY=ä½ çš„SupabaseåŒ¿åKey
```
- åç«¯ `backend/.env`ï¼ˆç¤ºä¾‹å†…å®¹ï¼‰ï¼š
```bash
SUPABASE_URL=ä½ çš„Supabaseé¡¹ç›®URL

SUPABASE_ANON_KEY = ä½ çš„SupabaseåŒ¿åKey
SUPABASE_SERVICE_ROLE_KEY = ä½ çš„Supabase ROLE Key
# è®¿é—®ï¼šhttps://huggingface.co/settings/tokens ç”³è¯·
HUGGINGFACE_TOKEN=ä½ çš„huggingface token
PYANNOTE_MODEL=pyannote/speaker-diarization-3.1
```
æç¤ºï¼šè¯·æ ¹æ®ä½ çš„å®é™…éƒ¨ç½²åœ°å€ä¸å¯†é’¥å¡«å†™ï¼Œä»¥ä¸Šä»…ä¸ºç¤ºä¾‹ã€‚è¯·ä¸è¦æŠŠå¯†é’¥æäº¤åˆ°ä»“åº“ã€‚

#### 4) å¯åŠ¨åç«¯ï¼ˆFastAPIï¼‰

åˆæ¬¡è¿è¡Œï¼Œä¼šè¦ä¸‹è½½è¾ƒå¤šçš„æ¨¡å‹æ–‡ä»¶ã€‚å›½å†…å¯è®¾ç½®é•œåƒåŠ å¿«ä¸‹è½½é€Ÿåº¦ã€‚

```bash
export HF_ENDPOINT=https://hf-mirror.com
```
éšåè¿è¡Œ

```bash
cd backend
uv sync
uv run main_v1.py
```
é»˜è®¤ç›‘å¬ `http://localhost:8000`ã€‚


å¯åŠ¨è¿‡ç¨‹éœ€è¦è¿æ¥ç½‘ç»œï¼Œå¦‚æœç½‘ç»œä¸å¥½ï¼Œå¯åŠ¨æ—¶é—´ä¼šå˜é•¿ï¼Œå‡ºç°å¦‚ä¸‹ä¸ºå¯åŠ¨æˆåŠŸï¼š
```txt
2025-08-24 21:54:44,216 - __main__ - INFO -   - [POST] /api/v1/transcriptions
2025-08-24 21:54:44,216 - __main__ - INFO -   - [PUT] /api/v1/transcriptions/{transcription_id}
2025-08-24 21:54:44,216 - __main__ - INFO -   - [POST] /api/v1/save_ai_summaries
2025-08-24 21:54:44,216 - __main__ - INFO -   - [PUT] /api/v1/update_ai_summaries/{summary_id}
2025-08-24 21:54:44,216 - __main__ - INFO -   - [POST] /api/v1/audio/process
2025-08-24 21:54:44,216 - __main__ - INFO -   - [POST] /api/v1/audio/session/set
2025-08-24 21:54:44,216 - __main__ - INFO -   - [GET] /api/v1/audio/session/current
2025-08-24 21:54:44,217 - __main__ - INFO -   - [POST] /api/v1/batch-transcription
2025-08-24 21:54:44,217 - __main__ - INFO -   - [GET] /api/v1/audio/cache/status
2025-08-24 21:54:44,217 - __main__ - INFO -   - [GET] /
2025-08-24 21:54:44,217 - __main__ - INFO -   - [POST] /webrtc/offer
2025-08-24 21:54:44,217 - __main__ - INFO -   - [POST] /telephone/incoming
2025-08-24 21:54:44,217 - __main__ - INFO -   - [POST] /send_input
2025-08-24 21:54:44,217 - __main__ - INFO -   - [GET] /transcript
2025-08-24 21:54:44,217 - __main__ - INFO - ğŸš€ åº”ç”¨å¯åŠ¨å®Œæˆï¼
INFO:     Visit https://fastrtc.org/userguide/api/ for WebRTC or Websocket API docs.
2025-08-24 21:54:44,217 - uvicorn.error - INFO - Application startup complete.
2025-08-24 21:54:44,217 - uvicorn.error - INFO - Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
```

#### 5) å¯åŠ¨å‰ç«¯ï¼ˆNext.jsï¼‰
```bash
cd web
npm install
npm run dev
```
éšåå†æœ¬æœºå¯è®¿é—® `http://localhost:3000`ã€‚

---

å¤‡æ³¨ï¼š
1. ç›®å‰æˆ‘åªåœ¨ ubuntu22.04 è¿›è¡Œè¿‡å®‰è£…æµ‹è¯•ã€‚
2. å¦‚é»˜è®¤ç«¯å£æ›´æ”¹ï¼Œéœ€è¦ä¿®æ”¹ `next.config.js` ä¸­çš„ä»£ç†ã€‚
3. åœ¨å±€åŸŸç½‘å†…ä½¿ç”¨ï¼Œæœ€å¥½æ­é… nginx åšhttpsä»£ç†ï¼ˆæ²¡æœ‰åœ¨ä»“åº“ä¸­ï¼Œéœ€è‡ªè¡Œæ­å»ºï¼‰ã€‚æœ¬é¡¹ç›®æä¾›next.jsä»£ç†æ–¹å¼ï¼Œæ“ä½œå¦‚ä¸‹ï¼š

å®‰è£…mkcert

``` bash
cd web

# 1. å®‰è£…ä¾èµ–
sudo apt update
sudo apt install libnss3-tools

# 2. ä¸‹è½½mkcert
wget https://github.com/FiloSottile/mkcert/releases/download/v1.4.4/mkcert-v1.4.4-linux-amd64

# 3. æ·»åŠ æ‰§è¡Œæƒé™å¹¶ç§»åŠ¨åˆ°ç³»ç»Ÿè·¯å¾„
chmod +x mkcert-v1.4.4-linux-amd64
sudo mv mkcert-v1.4.4-linux-amd64 /usr/local/bin/mkcert

# 4. éªŒè¯å®‰è£…
mkcert -version
```

åˆ›å»ºæœ¬åœ°CAå’Œè¯ä¹¦

```bash
# 1. å®‰è£…æœ¬åœ°CAåˆ°ç³»ç»Ÿä¿¡ä»»å­˜å‚¨
mkcert -install

# 2. ä¸ºlocalhostç”Ÿæˆè¯ä¹¦
mkcert localhost 127.0.0.1 ::1
```
æ‰§è¡Œåä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š
localhost+2.pem (è¯ä¹¦æ–‡ä»¶)
localhost+2-key.pem (ç§é’¥æ–‡ä»¶)

éšåè¿è¡Œ

```bash
npm run dev_https
```
éšåå¯åœ¨å±€åŸŸç½‘å†…é€šè¿‡ https://you_machine_ip:3000 è®¿é—®


### è¿è¡Œæµç¨‹ï¼ˆç«¯åˆ°ç«¯ï¼‰
- ç™»å½•ï¼ˆSupabase Authï¼‰åè¿›å…¥é¦–é¡µã€‚
- ç‚¹å‡»â€œå¼€å§‹å½•éŸ³â€ï¼š
  - å‰ç«¯è°ƒç”¨åç«¯ `POST /api/v1/sessions` åˆ›å»ºä¼šè¯ï¼Œå¾—åˆ° `session_id`ã€‚
  - é»˜è®¤å®ç°ï¼šæµè§ˆå™¨ç”¨ `session_id` ä½œä¸º `webrtc_id` è°ƒç”¨ `/webrtc/offer` å»ºç«‹ WebRTC éŸ³é¢‘é€šé“ï¼ˆä¹Ÿå¯æ›¿æ¢ä¸ºå…¶ä»–ä¼ è¾“æ–¹æ¡ˆï¼‰ã€‚
  - å‰ç«¯é€šè¿‡ SSE è®¢é˜… `/transcript?webrtc_id=...&token=...`ï¼Œå®æ—¶æ¥æ”¶è½¬å†™ç‰‡æ®µã€‚
- ç‚¹å‡»â€œåœæ­¢å½•éŸ³â€ï¼š
  - æ–­å¼€ WebRTCï¼Œè°ƒç”¨ `POST /api/v1/sessions/{session_id}/finalize`ã€‚
  - åç«¯å°†ç¼“å­˜çš„éŸ³é¢‘æ•´åˆã€è½¬ç ã€ä¸Šä¼ åˆ° Storageï¼Œå¹¶å¼‚æ­¥æ‰§è¡Œè¯´è¯äººåˆ†ç¦»ä¸é«˜è´¨é‡æ‰¹å¤„ç†è½¬å†™ï¼›ä¼šè¯çŠ¶æ€å˜ä¸º `processing`ï¼Œå®Œæˆååˆ‡å› `completed`ã€‚
- ç”Ÿæˆæ€»ç»“/æ ‡é¢˜ï¼šåœ¨ä¼šè¯è¯¦æƒ…ä¸­è§¦å‘ä¸€æ¬¡ `POST /api/v1/sessions/{id}/summarize`ï¼ˆå¯å¸¦æ¨¡æ¿ï¼‰ï¼Œå‰ç«¯å†è°ƒç”¨ç”Ÿæˆæ ‡é¢˜æ¥å£ã€‚
- ç¼–è¾‘ä¸é‡å‘½åï¼šåœ¨è½¬å†™è§†å›¾ä¸­å¯å±€éƒ¨ç¼–è¾‘å¹¶ä¿å­˜ï¼ˆ`PUT /api/v1/transcriptions/{id}`ï¼‰ï¼›å¯ä»¥é‡å‘½åè¯´è¯äººï¼ˆ`POST /api/v1/sessions/{id}/rename-speaker`ï¼‰ã€‚

---

### åç«¯ API æ¦‚è§ˆï¼ˆ/api/v1ï¼‰

- å¥åº·æ£€æŸ¥
  - `GET /health`
- ä¼šè¯ç®¡ç†
  - `POST /sessions` åˆ›å»ºå½•éŸ³ä¼šè¯
  - `GET /sessions/{id}` è·å–è¯¦æƒ…ï¼ˆå«éŸ³é¢‘/è½¬å†™/æ€»ç»“ï¼‰
  - `POST /sessions/{id}/finalize` å®Œæˆä¼šè¯ï¼ˆè§¦å‘æ‰¹å¤„ç†ï¼‰
  - `POST /sessions/{id}/retranscribe` é‡æ–°è½¬å†™
  - `DELETE /sessions/{id}` åˆ é™¤ä¼šè¯
  - `PUT /sessions/{id}/template` æ›´æ–°ä¼šè¯æ¨¡æ¿é€‰æ‹©
  - `POST /sessions/{id}/summarize?force=true&template_id=...` ç”Ÿæˆå¹¶ä¿å­˜ AI æ€»ç»“
  - `POST /sessions/{id}/rename-speaker` é‡å‘½åè¯´è¯äºº
  - `GET /sessions/{id}/audio_files` / `GET /sessions/{id}/audio_files/{file_id}`
- è½¬å†™
  - `POST /transcriptions` ä¿å­˜è½¬å†™
  - `PUT /transcriptions/{id}` åŸºäº segments æ›´æ–°è½¬å†™
- AI
  - `POST /summarize` åŸºäºæ–‡æœ¬ç›´æ¥ç”Ÿæˆæ€»ç»“
  - `POST /generate-title` åŸºäºæ–‡æœ¬/æ€»ç»“ç”Ÿæˆæ ‡é¢˜
- éŸ³é¢‘ä¸ç¼“å­˜
  - `POST /batch-transcription` ä¸Šä¼ å•ä¸ªéŸ³é¢‘æ–‡ä»¶å¹¶å®Œæˆæ•´å¥—å¤„ç†
  - `GET /audio/session/current` å½“å‰æ´»è·ƒä¼šè¯
  - `GET /audio/cache/status` ç¼“å­˜çŠ¶æ€
- æ¨¡æ¿
  - `POST /templates` / `GET /templates` / `GET /templates/{id}` / `PUT /templates/{id}` / `DELETE /templates/{id}`
  - `GET /templates/system` / `POST /templates/system/{system_template_id}/copy`

è¯´æ˜ï¼šå¤§å¤šæ•°ç«¯ç‚¹éœ€è¦æºå¸¦ Supabase çš„ Bearer Tokenï¼ˆå‰ç«¯å·²é›†æˆï¼‰ã€‚

---

### å¼€å‘ä¸éƒ¨ç½²è¦ç‚¹
- éœ€è¦å®‰è£… FFmpegï¼Œåç«¯ä¼šè°ƒç”¨å…¶å‘½ä»¤è¡Œè¿›è¡Œè½¬ç ä¸åˆ‡åˆ†ã€‚
- FunASR ä¸ pyannote.audio åœ¨ GPU ä¸Šå¯æ˜¾è‘—åŠ é€Ÿï¼›è‹¥æ—  GPU ä¹Ÿå¯åœ¨ CPU ä¸Šè¿è¡Œï¼ˆé€Ÿåº¦ä¼šé™ä½ï¼‰ã€‚
- LiteLLM å¯åœ¨ `backend/config.yaml` é…ç½®å¤šæ¨¡å‹ã€è¶…æ—¶ä¸å›é€€ç­–ç•¥ã€‚
- Web å‰ç«¯é€šè¿‡ `/app/api/*` ä½œä¸ºè½»é‡ä»£ç†å°†è¯·æ±‚è½¬å‘åˆ°åç«¯ `BACKEND_URL`ï¼Œé¿å…è·¨åŸŸä¸å¯†é’¥æš´éœ²ã€‚
- æ•°æ®åº“ä¸è¿ç§»è„šæœ¬åœ¨ `supabase/` ç›®å½•ä¸‹è¿›è¡Œç‰ˆæœ¬åŒ–ç®¡ç†ï¼Œæ¨èä½¿ç”¨ä»“åº“å†…çš„ç»“æ„è„šæœ¬åˆå§‹åŒ–ï¼Œä¿æŒä¸ä»£ç ä¸€è‡´ã€‚

---

### å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰
- å®æ—¶è½¬å†™æ²¡æœ‰è¾“å‡ºï¼Ÿ
  - æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æˆæƒéº¦å…‹é£ï¼›ç¡®è®¤åç«¯ `http://localhost:8000/transcript` å¯è¾¾ï¼›æ§åˆ¶å°ä¸­æ˜¯å¦æœ‰ SSE è¿æ¥æ—¥å¿—ã€‚
- è¯´è¯äººåˆ†ç¦»ä¸å¯ç”¨ï¼Ÿ
  - æ£€æŸ¥ `HUGGINGFACE_TOKEN` æ˜¯å¦é…ç½®ï¼›pyannote æ¨¡å‹éœ€è¦æˆæƒï¼›è‹¥ä¸å¯ç”¨ç³»ç»Ÿä¼šå›é€€ä¸ºå•ä¸€è¯´è¯äººã€‚
- éŸ³é¢‘æ— æ³•è½¬ç æˆ–å¤„ç†å¤±è´¥ï¼Ÿ
  - ç¡®è®¤ FFmpeg å®‰è£…å¹¶åœ¨ PATH ä¸­ï¼›æŸ¥çœ‹åç«¯æ—¥å¿—ä¸­çš„å‘½ä»¤ä¸é”™è¯¯æ¶ˆæ¯ã€‚
- æ— æ³•ç”Ÿæˆæ€»ç»“/æ ‡é¢˜ï¼Ÿ
  - æ£€æŸ¥åç«¯æ˜¯å¦å·²æ­£ç¡®é…ç½®æ¨¡å‹ä¸ API Keyï¼ˆLiteLLMï¼‰ã€‚
- CUDAè­¦å‘Šï¼Ÿ
  - æ£€æŸ¥pytorch cudaç‰ˆæœ¬ä¸ç³»ç»Ÿçš„NVIDIA é©±åŠ¨ç‰ˆæœ¬
---

### License
MIT

### TODO
å¼€å‘ä¼šè®®åŠ©æ‰‹ç¡¬ä»¶ï¼š

- å¢åŠ éº¦å…‹é£é˜µåˆ—ç¡¬ä»¶æ¥å…¥
- å¢åŠ AIå¯¹è¯åŠŸèƒ½ï¼Œä½¿ç”¨RAGå®æ—¶å›ç­”è®°å½•ç›¸å…³çš„é—®é¢˜
